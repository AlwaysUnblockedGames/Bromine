---
import Layout from "@/Layout.astro"

import Tabs from "@/components/ui/Tabs.astro"
import Omnibar from "@/components/ui/Omnibar.astro"
import ProxyFrame from "@/utils/ProxyFrame.astro"
import Settings from "@/components/Settings.astro"
---

<Layout>
  <div class="flex flex-col h-full">
    <Tabs />
    <Omnibar />
    <div class="flex-1 relative">
      <ProxyFrame/>
    </div>
    <Settings />
  </div>
</Layout>

<script>
if (localStorage.getItem("ab") === "true") {
  try {
    const a = open();
    const iframe = a?.document.createElement("iframe");
    iframe.src = location.origin;
    a.document.body.appendChild(iframe);
    a.document.title = "New Tab";
    location.replace(localStorage.getItem("ab-site") || "https://classroom.google.com/h");
  } catch {
    alert("Try allowing popup permissions for about:blank to work.");
  }
}
document.addEventListener("DOMContentLoaded", () => {
  // The tabs should be initialized automatically by the lethal.ts and ProxyFrame.astro scripts
  console.log("Index page loaded - tab system should be initialized");
});
</script>
